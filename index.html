<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Digital Demesne Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Sophisticated Color Palette */
      --slate-50: #f8fafc;
      --slate-100: #f1f5f9;
      --slate-200: #e2e8f0;
      --slate-300: #cbd5e1;
      --slate-400: #94a3b8;
      --slate-500: #64748b;
      --slate-600: #475569;
      --slate-700: #334155;
      --slate-800: #1e293b;
      --slate-900: #0f172a;
      
      --blue-400: #60a5fa;
      --blue-500: #3b82f6;
      --blue-600: #2563eb;
      --emerald-400: #34d399;
      --emerald-500: #10b981;
      --amber-400: #fbbf24;
      --amber-500: #f59e0b;
      --rose-400: #fb7185;
      --rose-500: #f43f5e;
      --violet-400: #a78bfa;
      --violet-500: #8b5cf6;
      
      /* Typography */
      --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', Consolas, monospace;
      
      /* Spacing & Sizing */
      --space-1: 0.25rem;
      --space-2: 0.5rem;
      --space-3: 0.75rem;
      --space-4: 1rem;
      --space-6: 1.5rem;
      --space-8: 2rem;
      --space-12: 3rem;
      
      /* Shadows & Effects */
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
      --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
      
      /* Transitions */
      --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
      --transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: 500ms cubic-bezier(0.23, 1, 0.32, 1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-primary);
      background: linear-gradient(135deg, var(--slate-50) 0%, var(--slate-100) 100%);
      color: var(--slate-800);
      line-height: 1.5;
      min-height: 100vh;
      font-weight: 400;
      letter-spacing: -0.01em;
    }

    /* Header */
    .header {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid var(--slate-200);
      padding: var(--space-4) var(--space-8);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-content {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-title {
      font-size: 1.5rem;
      font-weight: 500;
      color: var(--slate-800);
      letter-spacing: -0.02em;
    }

    .header-subtitle {
      font-size: 0.875rem;
      color: var(--slate-500);
      font-weight: 400;
      margin-left: var(--space-3);
    }

    .header-controls {
      display: flex;
      gap: var(--space-3);
      align-items: center;
    }

    .control-group {
      display: flex;
      background: white;
      border-radius: 0.5rem;
      padding: var(--space-1);
      border: 1px solid var(--slate-200);
      box-shadow: var(--shadow-sm);
    }

    .control-btn {
      background: transparent;
      border: none;
      color: var(--slate-600);
      padding: var(--space-2) var(--space-3);
      border-radius: 0.375rem;
      cursor: pointer;
      transition: var(--transition-fast);
      font-size: 0.875rem;
      font-weight: 500;
      font-family: var(--font-primary);
    }

    .control-btn:hover {
      background: var(--slate-100);
      color: var(--slate-800);
    }

    .control-btn.active {
      background: var(--slate-800);
      color: white;
    }

    /* Main Layout */
    .dashboard {
      max-width: 1600px;
      margin: 0 auto;
      padding: var(--space-8);
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: var(--space-8);
      min-height: calc(100vh - 100px);
    }

    .main-content {
      display: flex;
      flex-direction: column;
      gap: var(--space-6);
    }

    .sidebar {
      display: flex;
      flex-direction: column;
      gap: var(--space-6);
    }

    /* Network Canvas */
    .network-container {
      background: white;
      border-radius: 1rem;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--slate-200);
      overflow: hidden;
      position: relative;
    }

    .network-header {
      background: var(--slate-50);
      border-bottom: 1px solid var(--slate-200);
      padding: var(--space-4) var(--space-6);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .network-title {
      font-size: 1.125rem;
      font-weight: 500;
      color: var(--slate-800);
    }

    .network-canvas-container {
      position: relative;
      height: 500px;
      overflow: hidden;
    }

    .network-canvas {
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 30% 70%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 70% 30%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
    }

    /* Repository Grid */
    .repos-container {
      background: white;
      border-radius: 1rem;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--slate-200);
      overflow: hidden;
    }

    .repos-header {
      background: var(--slate-50);
      border-bottom: 1px solid var(--slate-200);
      padding: var(--space-4) var(--space-6);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .repos-title {
      font-size: 1.125rem;
      font-weight: 500;
      color: var(--slate-800);
    }

    .repos-grid {
      padding: var(--space-6);
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: var(--space-4);
    }

    .repo-card {
      background: var(--slate-50);
      border: 1px solid var(--slate-200);
      border-radius: 0.75rem;
      padding: var(--space-4);
      transition: var(--transition-normal);
      cursor: grab;
      position: relative;
      overflow: hidden;
    }

    .repo-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      border-color: var(--blue-300);
    }

    .repo-card.dragging {
      cursor: grabbing;
      transform: rotate(3deg) scale(1.05);
      z-index: 1000;
      box-shadow: var(--shadow-xl);
    }

    .repo-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-3);
    }

    .repo-name {
      font-weight: 500;
      color: var(--slate-800);
      text-decoration: none;
      font-size: 1rem;
    }

    .repo-name:hover {
      color: var(--blue-600);
    }

    .repo-language {
      font-size: 0.75rem;
      padding: var(--space-1) var(--space-2);
      border-radius: 0.375rem;
      font-weight: 500;
      font-family: var(--font-mono);
    }

    .repo-description {
      color: var(--slate-600);
      font-size: 0.875rem;
      margin-bottom: var(--space-3);
      line-height: 1.4;
    }

    .repo-stats {
      display: flex;
      gap: var(--space-4);
      font-size: 0.75rem;
      color: var(--slate-500);
      font-family: var(--font-mono);
    }

    .repo-stat {
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }

    .repo-badges {
      display: flex;
      gap: var(--space-2);
      margin-top: var(--space-3);
      flex-wrap: wrap;
    }

    .badge {
      font-size: 0.6875rem;
      padding: var(--space-1) var(--space-2);
      border-radius: 0.25rem;
      font-weight: 500;
      font-family: var(--font-mono);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .badge.status-active { background: var(--emerald-100); color: var(--emerald-700); }
    .badge.status-archived { background: var(--slate-100); color: var(--slate-600); }
    .badge.deployable { background: var(--blue-100); color: var(--blue-700); }

    /* Infrastructure Panel */
    .infrastructure-panel {
      background: white;
      border-radius: 1rem;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--slate-200);
      overflow: hidden;
    }

    .infrastructure-header {
      background: var(--slate-50);
      border-bottom: 1px solid var(--slate-200);
      padding: var(--space-4) var(--space-6);
    }

    .infrastructure-title {
      font-size: 1.125rem;
      font-weight: 500;
      color: var(--slate-800);
    }

    .infrastructure-content {
      padding: var(--space-6);
    }

    .servers-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
      margin-bottom: var(--space-6);
    }

    .server-item {
      background: var(--slate-50);
      border: 1px solid var(--slate-200);
      border-radius: 0.5rem;
      padding: var(--space-3);
      transition: var(--transition-fast);
      position: relative;
    }

    .server-item:hover {
      border-color: var(--blue-300);
      background: var(--blue-50);
    }

    .server-item.drop-target {
      border-color: var(--emerald-400);
      background: var(--emerald-50);
      box-shadow: 0 0 0 2px var(--emerald-200);
    }

    .server-name {
      font-weight: 500;
      color: var(--slate-800);
      margin-bottom: var(--space-1);
    }

    .server-specs {
      font-size: 0.75rem;
      color: var(--slate-500);
      font-family: var(--font-mono);
    }

    .domains-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }

    .domain-item {
      background: var(--slate-50);
      border: 1px solid var(--slate-200);
      border-radius: 0.5rem;
      padding: var(--space-2) var(--space-3);
      font-size: 0.875rem;
      color: var(--slate-700);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .domain-status {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--emerald-400);
    }

    /* Quick Actions */
    .quick-actions {
      background: white;
      border-radius: 1rem;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--slate-200);
      overflow: hidden;
    }

    .quick-actions-header {
      background: var(--slate-50);
      border-bottom: 1px solid var(--slate-200);
      padding: var(--space-4) var(--space-6);
    }

    .quick-actions-title {
      font-size: 1.125rem;
      font-weight: 500;
      color: var(--slate-800);
    }

    .actions-grid {
      padding: var(--space-6);
      display: grid;
      gap: var(--space-3);
    }

    .action-button {
      background: var(--slate-50);
      border: 1px solid var(--slate-200);
      border-radius: 0.5rem;
      padding: var(--space-3);
      cursor: pointer;
      transition: var(--transition-fast);
      text-align: left;
    }

    .action-button:hover {
      background: var(--blue-50);
      border-color: var(--blue-300);
    }

    .action-title {
      font-weight: 500;
      color: var(--slate-800);
      margin-bottom: var(--space-1);
    }

    .action-description {
      font-size: 0.875rem;
      color: var(--slate-600);
    }

    /* Network Visualization Elements */
    .network-node {
      position: absolute;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition-normal);
      border: 2px solid white;
      box-shadow: var(--shadow-md);
      user-select: none;
    }

    .network-node:hover {
      transform: scale(1.1);
      z-index: 10;
    }

    .network-node.server {
      background: linear-gradient(135deg, var(--blue-400), var(--blue-600));
      color: white;
    }

    .network-node.domain {
      background: linear-gradient(135deg, var(--violet-400), var(--violet-600));
      color: white;
    }

    .network-node.repo {
      background: linear-gradient(135deg, var(--emerald-400), var(--emerald-600));
      color: white;
    }

    .network-connection {
      position: absolute;
      pointer-events: none;
    }

    .connection-path {
      fill: none;
      stroke: url(#connectionGradient);
      stroke-width: 2;
      opacity: 0.6;
    }

    .connection-pulse {
      fill: var(--blue-400);
      r: 3;
      opacity: 0.8;
      animation: pulse-along-path 3s linear infinite;
    }

    @keyframes pulse-along-path {
      0% { opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* Deployment Modal */
    .deployment-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(4px);
    }

    .deployment-content {
      background: white;
      border-radius: 1rem;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: var(--shadow-xl);
    }

    .deployment-header {
      background: var(--slate-50);
      border-bottom: 1px solid var(--slate-200);
      padding: var(--space-4) var(--space-6);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .deployment-title {
      font-size: 1.25rem;
      font-weight: 500;
      color: var(--slate-800);
    }

    .deployment-body {
      padding: var(--space-6);
    }

    .deployment-config {
      background: var(--slate-50);
      border: 1px solid var(--slate-200);
      border-radius: 0.5rem;
      padding: var(--space-4);
      margin-bottom: var(--space-4);
    }

    .config-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-2);
    }

    .config-label {
      font-weight: 500;
      color: var(--slate-700);
    }

    .config-value {
      font-family: var(--font-mono);
      font-size: 0.875rem;
      color: var(--slate-600);
    }

    .deployment-actions {
      display: flex;
      gap: var(--space-3);
      justify-content: flex-end;
      margin-top: var(--space-6);
    }

    .deploy-button {
      background: var(--blue-500);
      color: white;
      border: none;
      padding: var(--space-3) var(--space-6);
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .deploy-button:hover {
      background: var(--blue-600);
    }

    .cancel-button {
      background: var(--slate-200);
      color: var(--slate-700);
      border: none;
      padding: var(--space-3) var(--space-6);
      border-radius: 0.5rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition-fast);
    }

    .cancel-button:hover {
      background: var(--slate-300);
    }

    /* Notifications */
    .notification {
      position: fixed;
      top: var(--space-6);
      right: var(--space-6);
      background: white;
      border: 1px solid var(--slate-200);
      border-radius: 0.5rem;
      padding: var(--space-4);
      box-shadow: var(--shadow-lg);
      z-index: 1001;
      max-width: 400px;
      animation: slideInRight 0.3s ease-out;
    }

    .notification.success {
      border-left: 4px solid var(--emerald-500);
    }

    .notification.error {
      border-left: 4px solid var(--rose-500);
    }

    .notification.info {
      border-left: 4px solid var(--blue-500);
    }

    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    /* Language Colors */
    .lang-javascript { background: #f7df1e; color: #000; }
    .lang-typescript { background: #3178c6; color: #fff; }
    .lang-python { background: #3776ab; color: #fff; }
    .lang-html { background: #e34f26; color: #fff; }
    .lang-css { background: #1572b6; color: #fff; }
    .lang-vue { background: #4fc08d; color: #fff; }
    .lang-react { background: #61dafb; color: #000; }
    .lang-go { background: #00add8; color: #fff; }
    .lang-rust { background: #ce422b; color: #fff; }
    .lang-shell { background: #89e051; color: #000; }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .dashboard {
        grid-template-columns: 1fr;
        gap: var(--space-6);
      }
      
      .repos-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .dashboard {
        padding: var(--space-4);
      }
      
      .header {
        padding: var(--space-3) var(--space-4);
      }
      
      .repos-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div>
        <span class="header-title">Digital Demesne</span>
        <span class="header-subtitle">Infrastructure Command Center</span>
      </div>
      <div class="header-controls">
        <div class="control-group">
          <button class="control-btn active" data-view="network">Network</button>
          <button class="control-btn" data-view="repositories">Repositories</button>
          <button class="control-btn" data-view="analytics">Analytics</button>
        </div>
        <div class="control-group">
          <button class="control-btn" id="refresh-all">Refresh</button>
          <button class="control-btn" id="auto-refresh">Auto</button>
        </div>
      </div>
    </div>
  </header>

  <main class="dashboard">
    <div class="main-content">
      <!-- Network Visualization -->
      <div class="network-container">
        <div class="network-header">
          <h2 class="network-title">Infrastructure Topology</h2>
          <div class="control-group">
            <button class="control-btn" id="center-network">Center</button>
            <button class="control-btn" id="reset-layout">Reset</button>
          </div>
        </div>
        <div class="network-canvas-container">
          <svg class="network-canvas" id="network-canvas">
            <defs>
              <linearGradient id="connectionGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.2" />
                <stop offset="50%" style="stop-color:#8b5cf6;stop-opacity:0.8" />
                <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.2" />
              </linearGradient>
            </defs>
          </svg>
        </div>
      </div>

      <!-- Repository Grid -->
      <div class="repos-container">
        <div class="repos-header">
          <h2 class="repos-title">Recent Projects</h2>
          <div class="control-group">
            <button class="control-btn" id="fetch-repos">Sync GitHub</button>
            <button class="control-btn" id="filter-deployable">Deployable</button>
          </div>
        </div>
        <div class="repos-grid" id="repos-grid">
          <!-- Repository cards will be populated here -->
        </div>
      </div>
    </div>

    <aside class="sidebar">
      <!-- Infrastructure Panel -->
      <div class="infrastructure-panel">
        <div class="infrastructure-header">
          <h3 class="infrastructure-title">Infrastructure</h3>
        </div>
        <div class="infrastructure-content">
          <h4 style="margin-bottom: var(--space-3); font-weight: 500; color: var(--slate-700);">Servers</h4>
          <div class="servers-list" id="servers-list">
            <div class="server-item" data-server="production">
              <div class="server-name">Production</div>
              <div class="server-specs">Ubuntu 22.04 • 4 vCPU • 8GB RAM</div>
            </div>
            <div class="server-item" data-server="staging">
              <div class="server-name">Staging</div>
              <div class="server-specs">Ubuntu 22.04 • 2 vCPU • 4GB RAM</div>
            </div>
            <div class="server-item" data-server="development">
              <div class="server-name">Development</div>
              <div class="server-specs">Ubuntu 22.04 • 1 vCPU • 2GB RAM</div>
            </div>
          </div>

          <h4 style="margin-bottom: var(--space-3); font-weight: 500; color: var(--slate-700);">Active Domains</h4>
          <div class="domains-list" id="domains-list">
            <div class="domain-item">
              <span>cyrillrafael.org</span>
              <div class="domain-status"></div>
            </div>
            <div class="domain-item">
              <span>marchdown.net</span>
              <div class="domain-status"></div>
            </div>
            <div class="domain-item">
              <span>dissemblage.art</span>
              <div class="domain-status"></div>
            </div>
            <div class="domain-item">
              <span>hyperstitious.org</span>
              <div class="domain-status"></div>
            </div>
            <div class="domain-item">
              <span>xenoethics.info</span>
              <div class="domain-status"></div>
            </div>
            <div class="domain-item">
              <span>xenoethics.org</span>
              <div class="domain-status"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <div class="quick-actions-header">
          <h3 class="quick-actions-title">Quick Actions</h3>
        </div>
        <div class="actions-grid">
          <div class="action-button" onclick="generateSubdomain()">
            <div class="action-title">Generate Subdomain</div>
            <div class="action-description">Create new subdomain for project</div>
          </div>
          <div class="action-button" onclick="bulkDeploy()">
            <div class="action-title">Bulk Deploy</div>
            <div class="action-description">Deploy multiple repositories</div>
          </div>
          <div class="action-button" onclick="healthCheck()">
            <div class="action-title">Health Check</div>
            <div class="action-description">Verify all services</div>
          </div>
          <div class="action-button" onclick="manageSSL()">
            <div class="action-title">SSL Management</div>
            <div class="action-description">Certificate automation</div>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <!-- Deployment Modal -->
  <div class="deployment-modal" id="deployment-modal">
    <div class="deployment-content">
      <div class="deployment-header">
        <h3 class="deployment-title">Deploy Repository</h3>
        <button onclick="closeDeploymentModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--slate-400);">×</button>
      </div>
      <div class="deployment-body" id="deployment-body">
        <!-- Deployment configuration will be populated here -->
      </div>
    </div>
  </div>

  <script>
    // Application State
    const appState = {
      repositories: [],
      servers: [
        { id: 'production', name: 'Production', specs: 'Ubuntu 22.04 • 4 vCPU • 8GB RAM', position: { x: 150, y: 100 } },
        { id: 'staging', name: 'Staging', specs: 'Ubuntu 22.04 • 2 vCPU • 4GB RAM', position: { x: 300, y: 150 } },
        { id: 'development', name: 'Development', specs: 'Ubuntu 22.04 • 1 vCPU • 2GB RAM', position: { x: 450, y: 100 } }
      ],
      domains: [
        'cyrillrafael.org',
        'marchdown.net', 
        'dissemblage.art',
        'hyperstitious.org',
        'xenoethics.info',
        'xenoethics.org'
      ],
      connections: [],
      draggedRepo: null,
      networkNodes: []
    };

    // GitHub API Integration
    async function fetchGitHubRepositories() {
      try {
        showNotification('Fetching repositories from GitHub...', 'info');
        
        // In a real implementation, you would use the GitHub API
        // For demo purposes, we'll simulate the response
        const mockRepos = [
          {
            id: 1,
            name: 'netdiag',
            full_name: 'uprootiny/netdiag',
            description: 'Network diagnostic toolkit with real-time monitoring capabilities',
            html_url: 'https://github.com/uprootiny/netdiag',
            language: 'Python',
            stargazers_count: 15,
            forks_count: 3,
            open_issues_count: 2,
            updated_at: '2024-01-10T10:30:00Z',
            topics: ['networking', 'monitoring', 'diagnostics'],
            size: 1204,
            default_branch: 'main',
            archived: false,
            deployable: true
          },
          {
            id: 2,
            name: 'portfolio',
            full_name: 'uprootiny/portfolio',
            description: 'Personal portfolio website built with modern web technologies',
            html_url: 'https://github.com/uprootiny/portfolio',
            language: 'TypeScript',
            stargazers_count: 8,
            forks_count: 1,
            open_issues_count: 0,
            updated_at: '2024-01-08T15:45:00Z',
            topics: ['portfolio', 'web', 'frontend'],
            size: 892,
            default_branch: 'main',
            archived: false,
            deployable: true
          },
          {
            id: 3,
            name: 'api-gateway',
            full_name: 'uprootiny/api-gateway',
            description: 'Microservices API gateway with authentication and rate limiting',
            html_url: 'https://github.com/uprootiny/api-gateway',
            language: 'Go',
            stargazers_count: 23,
            forks_count: 5,
            open_issues_count: 1,
            updated_at: '2024-01-12T09:15:00Z',
            topics: ['api', 'gateway', 'microservices'],
            size: 2156,
            default_branch: 'main',
            archived: false,
            deployable: true
          },
          {
            id: 4,
            name: 'ai-content-generator',
            full_name: 'uprootiny/ai-content-generator',
            description: 'AI-powered content generation system with multiple model support',
            html_url: 'https://github.com/uprootiny/ai-content-generator',
            language: 'Python',
            stargazers_count: 42,
            forks_count: 8,
            open_issues_count: 3,
            updated_at: '2024-01-14T14:20:00Z',
            topics: ['ai', 'content', 'generation', 'nlp'],
            size: 3421,
            default_branch: 'main',
            archived: false,
            deployable: true
          },
          {
            id: 5,
            name: 'dashboard-analytics',
            full_name: 'uprootiny/dashboard-analytics',
            description: 'Real-time analytics dashboard with customizable widgets',
            html_url: 'https://github.com/uprootiny/dashboard-analytics',
            language: 'Vue',
            stargazers_count: 19,
            forks_count: 4,
            open_issues_count: 0,
            updated_at: '2024-01-11T11:30:00Z',
            topics: ['analytics', 'dashboard', 'vue'],
            size: 1876,
            default_branch: 'main',
            archived: false,
            deployable: true
          },
          {
            id: 6,
            name: 'legacy-docs',
            full_name: 'uprootiny/legacy-docs',
            description: 'Legacy documentation system (archived)',
            html_url: 'https://github.com/uprootiny/legacy-docs',
            language: 'HTML',
            stargazers_count: 2,
            forks_count: 0,
            open_issues_count: 0,
            updated_at: '2023-08-15T10:00:00Z',
            topics: ['documentation'],
            size: 456,
            default_branch: 'main',
            archived: true,
            deployable: false
          }
        ];

        appState.repositories = mockRepos;
        renderRepositories();
        updateNetworkVisualization();
        showNotification('Successfully fetched repositories', 'success');
      } catch (error) {
        showNotification('Error fetching repositories: ' + error.message, 'error');
      }
    }

    // Repository Rendering
    function renderRepositories() {
      const container = document.getElementById('repos-grid');
      container.innerHTML = '';

      appState.repositories.forEach(repo => {
        const card = createRepositoryCard(repo);
        container.appendChild(card);
      });
    }

    function createRepositoryCard(repo) {
      const card = document.createElement('div');
      card.className = 'repo-card';
      card.draggable = true;
      card.dataset.repoId = repo.id;

      const languageClass = `lang-${repo.language.toLowerCase()}`;
      const updatedDate = new Date(repo.updated_at).toLocaleDateString();
      
      card.innerHTML = `
        <div class="repo-header">
          <a href="${repo.html_url}" target="_blank" class="repo-name">${repo.name}</a>
          <span class="repo-language ${languageClass}">${repo.language}</span>
        </div>
        <div class="repo-description">${repo.description}</div>
        <div class="repo-stats">
          <div class="repo-stat">
            <span>★</span>
            <span>${repo.stargazers_count}</span>
          </div>
          <div class="repo-stat">
            <span>⑂</span>
            <span>${repo.forks_count}</span>
          </div>
          <div class="repo-stat">
            <span>!</span>
            <span>${repo.open_issues_count}</span>
          </div>
          <div class="repo-stat">
            <span>↻</span>
            <span>${updatedDate}</span>
          </div>
        </div>
        <div class="repo-badges">
          <span class="badge ${repo.archived ? 'status-archived' : 'status-active'}">
            ${repo.archived ? 'Archived' : 'Active'}
          </span>
          ${repo.deployable ? '<span class="badge deployable">Deployable</span>' : ''}
        </div>
      `;

      // Add drag and drop functionality
      card.addEventListener('dragstart', handleDragStart);
      card.addEventListener('dragend', handleDragEnd);

      return card;
    }

    // Drag and Drop Functionality
    function handleDragStart(e) {
      const repoId = parseInt(e.target.dataset.repoId);
      appState.draggedRepo = appState.repositories.find(r => r.id === repoId);
      e.target.classList.add('dragging');
      
      // Add drop targets
      document.querySelectorAll('.server-item').forEach(server => {
        server.classList.add('drop-target');
      });
    }

    function handleDragEnd(e) {
      e.target.classList.remove('dragging');
      appState.draggedRepo = null;
      
      // Remove drop targets
      document.querySelectorAll('.server-item').forEach(server => {
        server.classList.remove('drop-target');
      });
    }

    // Server drop handling
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.server-item').forEach(server => {
        server.addEventListener('dragover', (e) => {
          e.preventDefault();
        });

        server.addEventListener('drop', (e) => {
          e.preventDefault();
          if (appState.draggedRepo) {
            const serverId = server.dataset.server;
            showDeploymentModal(appState.draggedRepo, serverId);
          }
        });
      });
    });

    // Network Visualization
    function updateNetworkVisualization() {
      const canvas = document.getElementById('network-canvas');
      const width = canvas.clientWidth;
      const height = canvas.clientHeight;
      
      canvas.setAttribute('width', width);
      canvas.setAttribute('height', height);
      
      // Clear existing content
      const existingNodes = canvas.querySelectorAll('.network-node');
      const existingConnections = canvas.querySelectorAll('.network-connection');
      existingNodes.forEach(node => node.remove());
      existingConnections.forEach(conn => conn.remove());

      // Create server nodes
      appState.servers.forEach(server => {
        const node = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        node.setAttribute('class', 'network-node server');
        node.setAttribute('transform', `translate(${server.position.x}, ${server.position.y})`);
        
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('r', '30');
        circle.setAttribute('fill', 'url(#serverGradient)');
        circle.setAttribute('stroke', 'white');
        circle.setAttribute('stroke-width', '2');
        
        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        text.setAttribute('text-anchor', 'middle');
        text.setAttribute('dy', '0.35em');
        text.setAttribute('fill', 'white');
        text.setAttribute('font-size', '10');
        text.setAttribute('font-weight', '500');
        text.textContent = server.name.substring(0, 4);
        
        node.appendChild(circle);
        node.appendChild(text);
        canvas.appendChild(node);
        
        // Add click handler for server
        node.addEventListener('click', () => {
          showServerDetails(server);
        });
      });

      // Create repository nodes (positioned around servers)
      appState.repositories.slice(0, 6).forEach((repo, index) => {
        const angle = (index / 6) * 2 * Math.PI;
        const radius = 150;
        const centerX = width / 2;
        const centerY = height / 2;
        const x = centerX + Math.cos(angle) * radius;
        const y = centerY + Math.sin(angle) * radius;
        
        const node = document.createElementNS('http://www.w3.org/2000/svg', 'g');
        node.setAttribute('class', 'network-node repo');
        node.setAttribute('transform', `translate(${x}, ${y})`);
        
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('r', '25');
        circle.setAttribute('fill', 'url(#repoGradient)');
        circle.setAttribute('stroke', 'white');
        circle.setAttribute('stroke-width', '2');
        
        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        text.setAttribute('text-anchor', 'middle');
        text.setAttribute('dy', '0.35em');
        text.setAttribute('fill', 'white');
        text.setAttribute('font-size', '8');
        text.setAttribute('font-weight', '500');
        text.textContent = repo.name.substring(0, 6);
        
        node.appendChild(circle);
        node.appendChild(text);
        canvas.appendChild(node);
        
        // Add animated connections to servers
        if (repo.deployable) {
          appState.servers.forEach(server => {
            createAnimatedConnection(canvas, x, y, server.position.x, server.position.y);
          });
        }
      });

      // Add gradients for nodes
      addNetworkGradients(canvas);
    }

    function addNetworkGradients(canvas) {
      const defs = canvas.querySelector('defs');
      
      // Server gradient
      const serverGradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
      serverGradient.setAttribute('id', 'serverGradient');
      serverGradient.innerHTML = `
        <stop offset="0%" style="stop-color:#60a5fa"/>
        <stop offset="100%" style="stop-color:#2563eb"/>
      `;
      defs.appendChild(serverGradient);
      
      // Repository gradient
      const repoGradient = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
      repoGradient.setAttribute('id', 'repoGradient');
      repoGradient.innerHTML = `
        <stop offset="0%" style="stop-color:#34d399"/>
        <stop offset="100%" style="stop-color:#10b981"/>
      `;
      defs.appendChild(repoGradient);
    }

    function createAnimatedConnection(canvas, x1, y1, x2, y2) {
      // Create curved path
      const midX = (x1 + x2) / 2;
      const midY = (y1 + y2) / 2 - 50; // Curve upward
      
      const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      const pathData = `M ${x1} ${y1} Q ${midX} ${midY} ${x2} ${y2}`;
      path.setAttribute('d', pathData);
      path.setAttribute('class', 'connection-path');
      canvas.appendChild(path);
      
      // Create animated pulse
      const pulse = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
      pulse.setAttribute('class', 'connection-pulse');
      pulse.setAttribute('r', '3');
      
      const animateMotion = document.createElementNS('http://www.w3.org/2000/svg', 'animateMotion');
      animateMotion.setAttribute('dur', '3s');
      animateMotion.setAttribute('repeatCount', 'indefinite');
      animateMotion.setAttribute('path', pathData);
      
      pulse.appendChild(animateMotion);
      canvas.appendChild(pulse);
    }

    // Deployment Modal
    function showDeploymentModal(repo, serverId) {
      const server = appState.servers.find(s => s.id === serverId);
      const modal = document.getElementById('deployment-modal');
      const body = document.getElementById('deployment-body');
      
      const subdomain = generateSubdomainName(repo.name);
      const domain = appState.domains[Math.floor(Math.random() * appState.domains.length)];
      const fullDomain = `${subdomain}.${domain}`;
      
      body.innerHTML = `
        <div class="deployment-config">
          <div class="config-item">
            <span class="config-label">Repository:</span>
            <span class="config-value">${repo.full_name}</span>
          </div>
          <div class="config-item">
            <span class="config-label">Target Server:</span>
            <span class="config-value">${server.name}</span>
          </div>
          <div class="config-item">
            <span class="config-label">Generated Domain:</span>
            <span class="config-value">${fullDomain}</span>
          </div>
          <div class="config-item">
            <span class="config-label">Port:</span>
            <span class="config-value">${generatePort()}</span>
          </div>
          <div class="config-item">
            <span class="config-label">Environment:</span>
            <span class="config-value">${serverId}</span>
          </div>
        </div>
        
        <h4 style="margin-bottom: var(--space-3); font-weight: 500;">Generated Configuration</h4>
        <pre style="background: var(--slate-900); color: var(--slate-100); padding: var(--space-4); border-radius: 0.5rem; font-size: 0.875rem; overflow-x: auto; font-family: var(--font-mono);"># Nginx Configuration
server {
    listen 80;
    server_name ${fullDomain};
    
    location / {
        proxy_pass http://localhost:${generatePort()};
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}

# Docker Deployment
docker run -d \\
  --name ${repo.name} \\
  -p ${generatePort()}:${generatePort()} \\
  -e NODE_ENV=${serverId} \\
  ${repo.name}:latest</pre>
        
        <div class="deployment-actions">
          <button class="cancel-button" onclick="closeDeploymentModal()">Cancel</button>
          <button class="deploy-button" onclick="executeDeployment('${repo.id}', '${serverId}', '${fullDomain}')">Deploy Now</button>
        </div>
      `;
      
      modal.style.display = 'flex';
    }

    function closeDeploymentModal() {
      document.getElementById('deployment-modal').style.display = 'none';
    }

    function executeDeployment(repoId, serverId, domain) {
      const repo = appState.repositories.find(r => r.id == repoId);
      const server = appState.servers.find(s => s.id === serverId);
      
      showNotification(`Deploying ${repo.name} to ${server.name}...`, 'info');
      
      // Simulate deployment process
      setTimeout(() => {
        showNotification(`${repo.name} successfully deployed to ${domain}`, 'success');
        closeDeploymentModal();
        
        // Add new connection in network visualization
        updateNetworkVisualization();
      }, 2000);
    }

    // Utility Functions
    function generateSubdomainName(repoName) {
      return repoName.toLowerCase().replace(/[^a-z0-9]/g, '-');
    }

    function generatePort() {
      return 3000 + Math.floor(Math.random() * 7000);
    }

    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.innerHTML = `
        <div style="font-weight: 500; margin-bottom: var(--space-1);">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
        <div style="font-size: 0.875rem;">${message}</div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideInRight 0.3s ease-out reverse';
        setTimeout(() => notification.remove(), 300);
      }, 4000);
    }

    // Quick Action Functions
    function generateSubdomain() {
      const subdomain = prompt('Enter subdomain name:');
      if (subdomain) {
        const domain = appState.domains[Math.floor(Math.random() * appState.domains.length)];
        showNotification(`Generated: ${subdomain}.${domain}`, 'success');
      }
    }

    function bulkDeploy() {
      showNotification('Bulk deployment wizard coming soon', 'info');
    }

    function healthCheck() {
      showNotification('Running health checks...', 'info');
      setTimeout(() => {
        showNotification('All services healthy', 'success');
      }, 2000);
    }

    function manageSSL() {
      showNotification('SSL management panel coming soon', 'info');
    }

    function showServerDetails(server) {
      showNotification(`Server: ${server.name} - ${server.specs}`, 'info');
    }

    // Event Listeners
    document.addEventListener('DOMContentLoaded', () => {
      // Fetch repositories on load
      setTimeout(fetchGitHubRepositories, 1000);
      
      // Bind controls
      document.getElementById('fetch-repos').addEventListener('click', fetchGitHubRepositories);
      document.getElementById('filter-deployable').addEventListener('click', () => {
        const deployableOnly = appState.repositories.filter(r => r.deployable);
        showNotification(`Showing ${deployableOnly.length} deployable repositories`, 'info');
      });
      
      document.getElementById('refresh-all').addEventListener('click', () => {
        fetchGitHubRepositories();
      });
      
      document.getElementById('center-network').addEventListener('click', () => {
        updateNetworkVisualization();
        showNotification('Network view centered', 'info');
      });
      
      document.getElementById('reset-layout').addEventListener('click', () => {
        updateNetworkVisualization();
        showNotification('Network layout reset', 'info');
      });

      // View switching
      document.querySelectorAll('[data-view]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          document.querySelectorAll('[data-view]').forEach(b => b.classList.remove('active'));
          e.target.classList.add('active');
          showNotification(`Switched to ${e.target.dataset.view} view`, 'info');
        });
      });
    });

    // Window resize handler
    window.addEventListener('resize', () => {
      setTimeout(updateNetworkVisualization, 100);
    });

    // Global function exports
    window.generateSubdomain = generateSubdomain;
    window.bulkDeploy = bulkDeploy;
    window.healthCheck = healthCheck;
    window.manageSSL = manageSSL;
    window.closeDeploymentModal = closeDeploymentModal;
    window.executeDeployment = executeDeployment;
  </script>
</body>
</html>
